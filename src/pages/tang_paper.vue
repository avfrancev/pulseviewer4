<template>
<canvas class="w-full h-full" ref="canvas" style="border:1px solid black;" resize></canvas>
</template>

<script setup>
import { ref, onMounted } from 'vue'
import paper from 'paper'

const canvas = ref(null)

let d = "M26.5483 116.174L2.69929 116.161C - 0.263915 116.147 0.0692243 115.869 0.0621906 112.822L0.0556874 108.576C0.0532585 105.908 - 0.0858212 103.156 0.0849606 100.497C0.889406 87.9748 10.763 76.7695 22.7513 73.5846C25.2394 72.9235 27.8313 72.6811 30.3738 72.315L43.6679 70.2034C43.6128 68.7481 43.4526 67.0451 43.6416 65.6047L43.6528 65.5288C41.1533 63.7187 38.4248 62.4433 36.3084 60.1139C31.9386 55.3049 30.3682 49.2466 30.6473 42.9097C28.8385 42.2607 25.873 42.327 25.4892 39.5052L25.4788 36.2583C25.5 32.2023 26.9933 32.0935 30.7346 32.0925L30.5056 28.9453C29.9983 25.0054 30.6855 20.1327 33.0833 16.9369L30.3353 13.4813C29.366 12.1568 28.6207 10.718 27.8024 9.30237C25.8963 6.00464 25.7257 5.55099 29.1664 4.22547L32.8824 2.95308C35.4436 2.16255 38.1293 1.43879 40.7682 0.966195L44.5752 0.452458C46.0366 0.276894 47.5096 0.0851873 48.9811 0.0218589L52.7242 0C59.8289 0.000657826 66.1125 0.649375 72.0683 4.69604C72.9202 5.27503 74.0716 6.67233 74.8049 6.287C80.4126 3.33978 87.7468 6.12152 88.9033 12.6687C89.0956 13.7576 89.0263 14.924 89.0281 16.0251L89.0288 23.7981C89.0278 24.3552 89.0759 24.9897 88.9378 25.5297L88.9069 25.6395C88.2377 28.0942 85.7154 26.9949 85.2982 28.3325C84.9432 28.0785 83.4917 27.3622 83.2888 28.0216L82.9872 28.2399C82.9467 29.4743 83.0467 30.8259 82.8916 32.0444L82.9176 32.0933C83.9142 32.5029 83.3525 32.1021 84.4294 32.9765C84.7859 32.6565 85.2418 32.5302 85.5176 32.1216C87.7638 32.1487 90.096 32.7779 90.5871 35.3647L90.6096 35.4742C90.8452 36.6834 90.8639 39.9495 90.3609 41.0022L90.3184 41.0936C89.3886 42.9686 87.2487 43.3674 85.3847 43.356C85.0697 45.0848 85.3258 46.9118 85.0578 48.6649C84.0734 55.1116 79.1151 62.8383 72.7256 65.1938C72.587 65.2446 72.5037 65.317 72.397 65.4157L72.3737 68.9674C72.3679 69.3915 72.2644 70.0362 72.3689 70.4298C73.4841 70.4971 74.5567 70.6955 75.66 70.8551L88.1031 72.6272C90.0338 72.8967 91.9562 73.1517 93.8507 73.6274C106.17 76.7189 115.424 87.968 116.444 100.568C116.632 102.891 116.517 105.29 116.518 107.624L116.517 112.389C116.515 116.341 116.838 116.202 112.471 116.188L26.5483 116.174ZM78.4135 28.4861L77.7213 28.522C77.9849 28.6647 78.2706 28.5134 78.5514 28.6827L79.4823 29.0017C80.0503 29.4559 80.3094 29.906 80.7653 30.4624L81.3781 31.1349C80.975 31.0587 80.8389 30.8834 80.3701 30.8973L80.2911 30.8191C79.9222 30.8191 78.536 30.7951 78.2749 31.0562C77.8314 31.1237 77.4617 30.9701 77.0134 30.98L76.958 31.1596L78.2374 31.2586C78.9598 32.3379 79.6414 33.0737 80.7132 33.8061C81.2941 34.2031 82.4549 34.7929 82.5981 35.5094L82.5171 35.5494C82.1267 35.7346 81.8241 35.6579 81.4302 35.7665C77.9111 36.7362 78.3516 41.1558 77.6231 43.9491L70.8197 43.9589L66.0052 43.8853C64.8388 43.9528 64.9962 43.9313 64.2802 44.8369C63.9555 45.2475 63.5194 45.4874 63.3301 46.0058L63.2577 46.2418C64.139 46.6919 65.6793 46.4966 66.6731 46.4996L76.4947 46.5168C77.2274 46.5232 79.0046 46.8685 79.5574 46.3104C81.12 44.7331 80.0032 38.1579 82.3683 38.1083L82.4584 38.1078C82.5723 38.1068 82.6808 38.0911 82.7931 38.0739C82.9872 39.3923 82.8063 40.6824 82.7977 42.0095C82.7274 52.8097 79.2621 59.3498 69.3798 63.9841C66.8434 65.1736 64.1827 66.0986 61.3994 66.4836L59.8573 66.6797C59.3123 67.0742 56.7731 66.9375 56.0748 66.8351L55.8597 66.7923C55.6647 66.7587 55.5688 66.7746 55.3853 66.6757L55.2879 66.68C52.7846 66.7713 53.5047 65.356 52.6576 68.5722L52.9564 68.6302C53.2165 68.6823 53.5368 68.7428 53.7251 68.7898L54.389 68.8938C54.5663 68.8951 54.6316 68.9272 54.7923 68.9674L55.0643 68.9846C55.1799 68.9927 55.1392 68.9895 55.2667 69.0464L55.3448 69.0368C55.548 69.0125 55.6968 69.0036 55.8992 69.0464L56.1828 69.1094C56.9975 69.2723 58.0343 69.2518 58.8693 69.1233L58.8559 69.2814C55.8134 69.7171 49.8727 68.3994 47.1625 67.162C46.8184 67.0048 46.4928 66.7824 46.1828 66.746L46.212 70.4771C46.8617 70.95 48.6758 71.3703 48.9999 72.0137L53.9447 74.8671C54.6569 75.2762 55.6963 75.7215 56.2855 76.2723L56.4874 76.5501C56.706 76.6541 56.9074 76.7981 57.1248 76.9135L57.2857 77.0245C57.5519 77.1948 57.7469 77.2983 57.9557 77.546C57.2255 78.1479 56.1808 79.2351 55.3947 78.516L55.2988 78.6676L56.0781 79.1916L51.5694 82.4407C51.0905 82.9204 50.3512 83.4621 50.334 84.1875L50.3446 84.5217C50.3507 84.6556 50.3413 84.7811 50.3292 84.9144L54.2367 89.5149C54.0591 90.2238 53.9958 90.9672 53.8916 91.6913L50.8992 113.417L36.5447 113.469L25.4244 113.469C24.6416 113.478 23.7788 113.413 23.0079 113.533L24.1469 113.649C24.8604 113.729 25.9226 113.73 26.6449 113.639L26.6849 113.798C26.6568 113.928 26.6636 114.061 26.6652 114.193L26.4478 114.352C26.4478 114.537 26.6634 114.87 26.4473 115.063V115.339L26.3292 115.675L25.9729 116.012C25.2212 116.019 24.4746 115.972 23.7196 115.973L23.601 115.992C23.4183 116.007 23.2477 116.002 23.0633 116.026L26.5483 116.174L112.471 116.188C116.838 116.202 116.515 116.341 116.517 112.389L116.518 107.624C116.517 105.29 116.632 102.891 116.444 100.568C115.424 87.968 106.17 76.7189 93.8507 73.6274C91.9562 73.1517 90.0338 72.8967 88.1031 72.6272L75.66 70.8551C74.5567 70.6955 73.4841 70.4971 72.3689 70.4298C72.2644 70.0362 72.3679 69.3915 72.3737 68.9674L72.397 65.4157C72.5037 65.317 72.587 65.2446 72.7256 65.1938C79.1151 62.8383 84.0734 55.1116 85.0578 48.6649C85.3258 46.9118 85.0697 45.0848 85.3847 43.356C87.2487 43.3674 89.3886 42.9686 90.3184 41.0936L90.3609 41.0022C90.8639 39.9495 90.8452 36.6834 90.6096 35.4742L90.5871 35.3647C90.096 32.7779 87.7638 32.1487 85.5176 32.1216C85.2418 32.5302 84.7859 32.6565 84.4294 32.9765C83.3525 32.1021 83.9142 32.5029 82.9176 32.0933L82.8215 32.0444L82.7486 32.0477C81.2609 31.8903 80.7233 28.6779 78.4135 28.4861ZM25.4244 113.469L36.5447 113.468L50.8992 113.417L53.8916 91.6913C53.9958 90.9672 54.0591 90.2238 54.2367 89.5149L50.3292 84.9144C48.4534 83.0044 44.5163 78.7088 43.0772 76.5932L42.9858 76.5092C42.201 75.7653 41.5001 74.5572 40.965 73.6137L31.2796 74.96C28.3001 75.3939 25.2369 75.7974 22.347 76.6648C11.5268 79.9124 3.80368 89.7375 2.7633 100.911C2.62338 102.414 2.70916 103.987 2.70865 105.497L2.717 113.471L19.9272 113.475L19.9164 105.351C19.9154 104.133 19.7802 102.756 19.9533 101.563C20.1544 100.175 22.4887 100.483 22.6772 101.909C22.8017 102.852 22.6881 103.956 22.6823 104.911L22.6671 111.078C22.6658 111.831 22.5669 112.739 22.6921 113.474L25.4244 113.469ZM47.2384 64.1671C51.803 65.9837 54.7348 66.8214 59.8573 66.6797L61.3994 66.4836C64.1827 66.0986 66.8434 65.1736 69.3798 63.9841C79.2621 59.3498 82.7274 52.8097 82.7977 42.0095C82.8063 40.6824 82.9872 39.3923 82.7931 38.0739C82.6808 38.0911 82.5723 38.1068 82.4584 38.1078L82.3683 38.1083C80.0032 38.1579 81.12 44.7331 79.5574 46.3104C79.0046 46.8685 77.2274 46.5232 76.4947 46.5168L66.6731 46.4996C65.6793 46.4966 64.139 46.6919 63.2577 46.193L63.1897 46.1267C62.2169 45.1587 61.5815 43.7155 60.9493 42.5079L57.9817 36.8903L53.9131 44.2835C53.5174 44.9856 52.981 46.1161 52.2308 46.4908L42.4079 46.5065C40.9051 46.505 37.4839 46.931 36.2378 46.2198L36.1571 46.1763C34.2476 45.0927 35.435 38.8873 33.4843 37.6661L33.2857 37.6969C32.8869 38.3439 33.2862 40.4823 33.2933 41.2725C33.3077 42.9292 33.1933 44.6281 33.3378 46.2772C33.9531 53.3074 37.1549 58.441 43.0488 62.0162L47.2384 64.1671ZM51.2301 2.87531C50.4347 2.88791 49.6309 2.88206 48.8384 2.95149L46.9609 3.17788C42.1904 3.59451 34.2714 4.92778 29.8604 7.12623C35.7912 17.2284 39.0604 20.347 50.6576 20.3508L71.6334 20.3478L80.5421 20.2868C83.0899 20.2387 82.4885 23.8229 84.6001 24.5326L84.7378 24.5806C86.6538 25.2266 86.1911 23.2695 86.2022 21.753L86.2424 15.5747C86.3118 12.1287 85.116 8.71412 81.1954 8.03909L80.7417 7.96926C79.121 7.72839 77.296 8.11955 75.9819 9.11463C74.0041 10.6122 74.6014 10.5543 72.4468 8.7126C66.0507 3.24652 59.4742 2.55672 51.2301 2.87531ZM66.0052 43.9493L70.8197 43.9589L77.6231 43.9491C78.3516 41.1558 77.9111 36.7362 81.4302 35.7665C81.8241 35.6579 82.1267 35.7346 82.5171 35.5494L82.5981 35.5094C82.4549 34.7929 81.2941 34.2031 80.7132 33.8061C79.6414 33.0737 78.9598 32.3379 78.2374 31.2586L76.958 31.1176L39.4535 31.1402C38.8542 31.1513 37.7371 30.9097 37.2974 31.4162C36.5609 32.264 36.1621 33.4276 35.1248 34.0073C34.4867 34.364 33.7793 34.5662 33.1455 34.9449C34.6274 35.4798 35.518 35.7204 36.2439 37.2623C37.2058 39.3051 37.5555 41.4903 37.8492 43.7069L50.3428 43.7631C50.5718 43.7644 50.8757 43.8208 51.0675 43.7014L54.3376 37.6129C55.229 35.9759 57.4147 30.8821 59.8264 34.3739C60.4761 35.3143 60.9688 36.4197 61.5282 37.4214L64.2108 42.1929C65.1915 44.1019 64.2323 43.6599 66.0052 43.9493ZM78.4135 28.4861C80.7233 28.6779 81.2609 31.8903 82.7486 32.0477L82.8916 32.0444C83.0467 30.8259 82.9467 29.4743 82.9872 28.2399C82.8518 27.6372 82.0905 27.0556 81.7184 26.5126C79.1599 22.7802 81.663 23.2215 76.4889 23.2187L49.561 23.2038C45.1615 23.1977 40.9802 22.5776 37.1539 20.2531L35.7432 19.3099C35.5501 19.1723 35.2976 18.9266 35.0663 18.8796C34.4305 20.1454 33.6181 21.3778 33.3704 22.7931L33.3512 22.8994C33.2421 23.5552 33.3044 24.296 33.3044 24.9655L33.3466 30.7862C33.356 30.9646 33.3368 31.231 33.4061 31.3949L33.4906 31.2722C33.5804 31.1465 33.6637 31.0807 33.7859 30.9901C35.5729 29.6641 34.7422 28.2963 38.2502 28.3047L75.1467 28.328C76.1835 28.3282 77.3261 28.2566 78.3488 28.4074L78.4135 28.4861ZM45.2184 75.0893L49.5575 80.0817C50.2204 80.8485 50.9923 81.6116 51.5694 82.4407L56.0781 79.1916L55.2988 78.6676L47.8628 74.3808C46.3713 73.6102 45.3955 72.5453 43.6292 73.0002C43.9485 73.5279 45.0866 74.6043 45.2184 75.0893ZM29.4184 34.9143C28.9536 34.9495 28.5407 34.9687 28.1144 35.1759C28.0719 36.3314 27.8482 38.0757 28.2897 39.1813C28.6432 39.4037 28.9751 39.5894 29.3638 39.7468C29.7086 39.8683 29.9614 39.8855 30.3247 39.8581C30.5673 39.4477 30.4441 35.6615 30.4436 34.8946L29.4184 34.9143Z"




onMounted(() => {
  paper.setup(canvas.value)
  // const path = new paper.Path.Arc({
  //   from: [20, 20],
  //   through: [160, 120],
  //   to: [180, 180],
  // })
  const path = new paper.Path(d)
  // const text = new paper.PointText({
  //   content: 'hello',
  // })
  // const path = text.
  path.fitBounds(paper.view.bounds)
  path.strokeColor = 'red'
  path.fillColor = 'yellow'
  path.position = paper.view.center;
  path.fitBounds(paper.view.bounds.scale(0.7));

  var layer = new paper.Layer();
  layer.activate();
  // add more code as needed
  // paper.view.onFrame = function(event) {
  //   // path.rotate(1)
  // }
  paper.view.onMouseMove = function(e) {
    layer.removeChildren();
    // let vector = e.point.subtract(path.center)
    let vector = e.point.subtract(paper.view.center)
    vector.length = 2150;
    var offsets = path.getOffsetsWithTangent(vector);
    // console.log(offsets);
    var line = new paper.Path.Line({
      from: paper.view.center.add(vector),
      to: paper.view.center.subtract(vector),
      strokeColor: 'yellow',
      strokeWidth: 2
    });
    for (var i = 0; i < offsets.length; i++) {
      var point = path.getPointAt(offsets[i]);
      console.log(offsets[i], point);
      // draw a circle around point
      // new paper.Path.Circle({
      //   center: point,
      //   radius: 5,
      //   strokeColor: 'red'
      // });
      // draw a line showing tangent
      new paper.Path.Line({
        from: point.add(vector),
        to: point.subtract(vector),
        strokeColor: 'red'
      });
      // draw a line showing point precisely on the paper.path
      new paper.Path.Line({
        from: point.add(vector.rotate(90).normalize(10)),
        to: point.subtract(vector.rotate(90).normalize(10)),
        strokeColor: 'red'
      });
    }
  }
})
</script>

